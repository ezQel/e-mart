<div (click)="unBlur()" *ngIf="mobileSearchVisible" class="blur"></div>
    
<div class="navbar">
    
    <a *ngIf="!mobileSearchVisible" routerLink="" class="logo">
        <app-logo></app-logo>
    </a>

    <form [ngClass]="getFormClasses()" (ngSubmit)="search()" [formGroup]="searchForm">

        <button *ngIf="mobileSearchVisible" type="button" (click)="unBlur()" mat-button>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
            </svg>
        </button>
    
        <input class="search-field" [autofocus]="mobileSearchVisible" type="search" placeholder="Search" formControlName="searchField">

        <button type="submit" mat-button>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
        </button>

    </form>
    
    <div *ngIf="!mobileSearchVisible" class="nav-menu">

        <!-- mobile search field trigger button -->
        <button (click)="openMobileSearchField()" class="open-search-btn" mat-icon-button>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
        </button>

        <a [ngClass]="getClasses('/categories', 'remove')" matRipple routerLink="/categories">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
            </svg>
            <div class="nav-text">Category</div>
        </a>
        
        <a [ngClass]="getClasses('/cart', null)" matRipple routerLink="/cart">
            <div [matBadge]="(cart.size()>0) ? cart.size() : ''" matBadgeSize="small">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                </svg>
            </div>
            <div class="nav-text remove">Cart</div>
        </a>
        
        <a *ngIf="userService.currentUser" [ngClass]="getClasses('/orders', 'remove')" matRipple routerLink="/orders">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M19 6h-2c0-2.76-2.24-5-5-5S7 3.24 7 6H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-7-3c1.66 0 3 1.34 3 3H9c0-1.66 1.34-3 3-3zm0 10c-2.76 0-5-2.24-5-5h2c0 1.66 1.34 3 3 3s3-1.34 3-3h2c0 2.76-2.24 5-5 5z"/>
            </svg>
            <div class="nav-text" >Orders</div>
        </a>
    
        <a *ngIf="userService.currentUser" [ngClass]="getClasses('/account', 'remove')" matRipple routerLink="/account">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            <div class="nav-text" >Hi, {{userService.currentUser.displayName.substr(0, 6)}}..</div>
        </a>

        <button *ngIf="!userService.currentUser" routerLink="/login" class="btn remove" mat-stroked-button>Log In</button>
        <button *ngIf="!userService.currentUser" routerLink="/signup" class="btn-v2 remove" mat-stroked-button>Sign Up</button>


    </div>

    
</div>

<div class="spacer"></div>
